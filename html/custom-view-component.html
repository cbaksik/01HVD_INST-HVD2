<custom-header parent-ctrl="vm.parentCtrl"></custom-header>

<!-- TROUBLESHOOTING COMPONENT IMAGE DISPLAY -->
<div>TROUBLESHOOTING</div>
<div>{{vm.item}}</div>itemData
<div>{{vm.item.pnx.display.addtitle}}</div>
<div>{{vm.item.pnx.display.creationdate[0]}}</div>
<div>{{vm.item.pnx.display.title[0]}}</div>
<div>{{vm.item.pnx.display.subject[0]}}</div>
<div>{{vm.item.pnx.display.subject[1]}}</div>



<div layout="row" class="whiteBg hvdImgComponentView" ng-if="vm.index !== -1">
	<div flex="{{vm.flexsize}}" class="full-view-inner-container whiteBg">

		<!-- Link to go to parent record -- needed because Curiosity only has components and links here directly, so user needs a way to get to parent record -->
		<div class="parentImageLinkWrapper" ng-if="vm.componentData">
			<a href="http://id.lib.harvard.edu/via/{{vm.recordid}}/catalog" class="parentImageLink">Go to main
				record</a>
		</div>

		<!-- begin scroll buttons to navigate components -->
		<section layout="row" layout-align="center center" class="imageNav" layout-wrap ng-if="vm.total > 1">
			<md-button class="md-fab md-raised md-primary" (click)="vm.prevPhoto()" tabindex="0"
				aria-label="Previous photo button">
				<md-icon md-svg-icon="primo-ui:chevron-left" aria-label="chevron-left-icon"></md-icon>
			</md-button>
			<label class="label">
				{{vm.index + 1}} of {{vm.total}} images
			</label>
			<md-button class="md-fab md-raised md-primary" (click)="vm.nextPhoto()" tabindex="0"
				aria-label="Next photo button">
				<md-icon md-svg-icon="primo-ui:chevron-right" aria-label="chevron-right-icon"></md-icon>
			</md-button>
		</section>
		<!-- end scroll buttons to navigate components -->

		<!-- CB added this line 20200526 so users have another option during restricted image issue -->
		<div style="margin-bottom: 25px;margin-top: 25px;text-align: center;">
			<a target="_blank" href="{{vm.filenameURL}}?buttons=Y">Open image in new tab</a>
		</div>


		<!-- VE TESTING  -->
		<h2>new section - proof of concept test</h2>

		<div><strong>ID</strong>{{vm.viewComponentW[0]}}</div>
		<div><strong>Alt ID</strong>{{vm.viewComponentX[0]}}</div>
		<div><strong>Title</strong>{{vm.viewComponentT[0]}}</div>
		<div><strong>Restricted</strong>{{vm.viewComponentR[0]}}</div>

	<div  layout="column" layout-align="center center">
		<iframe id="iframe" name="{{vm.iframeAttributes.name}}"
			src="{{vm.iframeAttributes.src}}" height="{{vm.iframeAttributes.height}}"
			width="{{vm.iframeAttributes.width}}" title="{{vm.iframeAttributes.title}}"
			frameborder="{{vm.iframeAttributes.frameborder}}" marginwidth="{{vm.iframeAttributes.marginwidth}}"
			marginheight="{{vm.iframeAttributes.marginheight}}" scrolling="{{vm.iframeAttributes.scrolling}}"
			allowfullscreen="{{vm.iframeAttributes.allowfullscreen}}">
		</iframe>
	</div>
	
	<!-- display image component metadata -->
	<h3>Image information</h3>
	<div>
		<div layout="row" layout-xs="column" class="layout-block-xs layout-xs-column layout-row" ng-if="vm.viewComponentA">
			<div flex-gt-sm="20" flex-gt-xs="25" class="flex-gt-xs-25 flex-gt-sm-20 flex"><span class="bold-text word-break">Creator</span></div>
			<div class="item-details-element-container flex" ng-repeat="instance in vm.viewComponentA track by $index"">
				<div role="listitem" layout="column" class="word-break layout-column">{{instance}}</div>
			</div>
		</div>
	</div>




	<h2>end proof of concept test</h2>





		<!-- END VE TESTING  -->

		<!--- start display title and info from xml format - group metadata -->
		<br />

		<div class="hvdImgComponentViewMD">
			<h3>Main information</h3>
			<div layout="row" layout-xs="column" class="layout-block-xs layout-xs-column layout-row space"
				ng-repeat="key in vm.keys track by $index" ng-if="vm.item.pnx.display[key]">
				<div flex-gt-sm="20" flex-gt-xs="25" flex class="flex-gt-xs-25 flex-gt-sm-20 flex">
					<label class="bold-text">{{key|mapXmlFilter}}</label>
				</div>
				<div flex class="flex">
					<span ng-repeat="val in vm.item.pnx.display[key] track by $index">
						<span ng-bind-html="vm.getValue(val,key)"></span><br />
					</span>
				</div>
			</div>

			<!--- end display title and info from xml format - group metadata -->
			<hr style="margin: 25px 0px 15px 0px;" ng-if="vm.item.pnx.addata" />

			<!-- display image component metadata -->
			<h3>Image information</h3>

			<div layout="row" layout-xs="column" class="layout-row">
				<div flex>
					<div layout="row" layout-xs="column" class="layout-block-xs layout-xs-column layout-row space"
						ng-repeat="key in vm.getKeys(vm.componentData) track by $index"
						ng-if="vm.componentData[key]">
						<div flex-gt-sm="20" flex-gt-xs="25" flex class="flex-gt-xs-25 flex-gt-sm-20 flex"
							ng-if="vm.getComponentValue(key)">
							<label class="bold-text">{{key|mapXmlFilter}}</label>&nbsp;
						</div>
						<div flex flex-gt-sm="80" flex-gt-xs="75" class=" flex-gt-xs-75 flex-gt-sm-80 flex"
							ng-if="vm.getComponentValue(key)">
							<span ng-bind-html="vm.getComponentValue(key)"></span>
						</div>
					</div>
					<div layout="row" layout-xs="column" class="layout-block-xs layout-xs-column layout-row space"
						ng-if="vm.componentData">
						<div flex-gt-sm="20" flex-gt-xs="25" flex class="flex-gt-xs-25 flex-gt-sm-20 flex">
							<label class="bold-text">Permalink to this image</label>&nbsp;
						</div>
						<div flex flex-gt-sm="80" flex-gt-xs="75" class=" flex-gt-xs-75 flex-gt-sm-80 flex">
							<span ng-if="vm.filename">
								<a href="http://id.lib.harvard.edu/via/{{vm.recordid}}/{{vm.filename}}/catalog"
									target="_blank">
									http://id.lib.harvard.edu/via/{{vm.recordid}}/{{vm.filename}}/catalog
								</a>
							</span>
						</div>
					</div>
				</div>
			</div>

			<!-- end display image component metadata -->
		</div>
	</div>
</div>


<!-- display error message when the vm.index = -1 -->
<div layout="row" class="whiteBg" ng-if="vm.index === -1">
	<div flex class="full-view-inner-container whiteBg">
		<p class="text-center bigPadding">
			This component does not exist. Please visit the work record at
			<a href="http://id.lib.harvard.edu/images/{{vm.recordid}}/catalog">
				http://id.lib.harvard.edu/images/{{vm.recordid}}/catalog
			</a>.
		</p>
	</div>
</div>